extends layout

block content
    script(src='/scripts/tutorial_vote.js')
    script(src='/scripts/tutorial_comments.js')
    div.container(style="display:none")
            p(id="tutorial-id") #{tutorial._id}
            - if(user){
                p(id="user-id") #{user._id}
            -}

    div.container(style="margin-top: 20px")
        a(href="/edit/#{tutorial._id}") Edit Tutorial
        h3 #{tutorial.name}
        div(style="margin-top: -20px; margin-bottom: 20px", id="vote_block")
            div(id="up-button", style="font-family: Courier", class="btn btn-micro", data-role="button") +
            p(id="vote-score") #{tutorial.vote_score}
            div(id="down-button", style="font-family: Courier", class="btn btn-micro", data-role="button") -
        p #{tutorial.description}
        div
            p!= tutorial_html
        p(style="margin-top: 20px; font-weight: 600") Pull Requests: #{num_open_changes}
        a(class="btn btn-mini", href="/tutorial/#{tutorial._id}/changes") View

        //note all these id / class names that start with comment  and subcomment are used in tutorial_comments.js
        div(id="_comments")
            div(id="_comment-box")
                div(class="_comment-section", id='ID HERE', style="display:none")
                    p(class="_comment-vote") 3 votes for this
                    p(class="_comment-content") content
                    p(class="_comment-time") 12pm march 12
                    div(class="_subcomments", style="margin-left:30px;")
                        div(class="_subcomment-box")
                            div(class="_subcomment-section" style="display:none;")
                                p(class="_subcomment-content") subcontent? LELELELEL
                                p(class="_subcomment-time") 12.01pm
                        div(class="_new_subcomment")
                            form(onsubmit="submit_subcomment(this); return false;")
                                input(type='text', style="display:none", id="comment_id",class='new_subcommment_id')
                                input(type='text', id="subcomment_content", class="new_subcommment_content", placeholder='new comment',required, autofocus)
                                button(class='btn btn-primary', type='submit') Reply
            div(class="_new_comment")
                form(onsubmit="submit_comment(); return false;")
                    input(type='text', id='new_commment_content', placeholder='new comment',required, autofocus)
                    button(class='btn btn-primary', type='submit') Post
